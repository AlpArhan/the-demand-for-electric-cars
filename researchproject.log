-------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/arhanuguray/Desktop/Northeastern University/Fall 2015/Econometrics/Research Project/STATA/researchpro
> ject.log
  log type:  text
 opened on:  24 Nov 2015, 14:56:40

. 
. * Import the data from excel and save as a dta file, re-label the variables
. 
. import excel using "Data For Econometrics Research PaperTRYOUT.xlsx", sheet("STATA") clear firstrow

. 
. save TheDemandForElectricCars.dta, replace
file TheDemandForElectricCars.dta saved

. 
. 
. label var year "The Base Year 2014"

. label var us_states "U.S. States Identifier"

. label var ecarsales "Electric Car Sales"

. label var ecarprices "Average Electric Car Prices Across 13 Models After Tax-Exemption and Incentives"

. label var numstations "The Number of Public Electric Fueling Stations"

. label var medianincome "Median Income(2014 Dollars)"

. label var taxexempt "Tax Exemption of the States( 1 if Exempt, otherwise 0)"

. label var price_electricity "Price of Electricity Converted to Per Gasoline Gallon Equivalent"

. label var price_gasoline "Price of Gasoline per Gallon"

. 
. 
. 
. save TheDemandForElectricCars.dta, replace
file TheDemandForElectricCars.dta saved

. 
. * Summary Statistics
. 
. use TheDemandForElectricCars.dta

.    ssc install estout, replace
checking estout consistency and verifying not already installed...
all files already exist and are up to date.

. estpost tabstat *, stats(mean sd sk kurt min p5 p25 p50 p75 p95 max) ///
>                       column(statistics)

Summary statistics: mean sd skewness kurtosis min p5 p25 p50 p75 p95 max
     for variables: year us_states ecarsales ecarprices numstations medianincome taxexempt price_electricity price_gasoli
> ne

             |   e(mean)      e(sd)  e(skewn~)  e(kurto~)     e(min)      e(p5)     e(p25)     e(p50)     e(p75) 
-------------+---------------------------------------------------------------------------------------------------
        year |      2014          0          .          .       2014       2014       2014       2014       2014 
   us_states |      25.5   14.57738          0    1.79904          1          3         13       25.5         38 
   ecarsales |   2927.98   4677.076   4.023046   22.17467        110        177        526     1396.5       3101 
  ecarprices |  49985.29     4774.7  -.4112107   2.111431    38796.8   41942.27   47463.65   49615.96   55092.43 
 numstations |    260.88   464.1246   5.179922    32.9498          2         11         44        158        323 
medianincome |  54962.54   9109.319   .2321902   2.613921      35521      42278      48060      54613      60708 
   taxexempt |       .52    .504672  -.0800641    1.00641          0          0          0          1          1 
price_elec~y |   4.02804    1.37796   2.891954    14.8363      2.672     2.7388     3.1396     3.6907     4.5758 
price_gaso~e |   2.23378   .2059927   1.071928   4.750816      1.915      1.972      2.113      2.211      2.347 

             |    e(p95)     e(max) 
-------------+----------------------
        year |      2014       2014 
   us_states |        48         50 
   ecarsales |     10482      29471 
  ecarprices |     55494      55494 
 numstations |       698       3186 
medianincome |     71223      76165 
   taxexempt |         1          1 
price_elec~y |    6.0454    11.0888 
price_gaso~e |      2.71      2.877 

.    esttab  using descriptive_stats_demand.csv, ///
>            cells("mean(fmt(2)) sd skewness kurtosis min p5 p25 p50 p75 p95 max") ///
>            replace ///
>            label ///
>            varwidth(30) ///
>            nomtitles ///
>            nonumbers ///
> 
(output written to descriptive_stats_demand.csv)

. * Correlation Matrix For the Regressions For .CSV File
. quietly:  estpost corr ecarsales ecarprices numstations medianincome price_electricity price_gasoline, matrix listwise

. esttab using table_correlation_electriccars.csv, ///
>        replace ///
>        plain ///
>        nonumbers ///
>        unstack ///
>        not ///
>        compress ///
>        title("Table 1.  Correlation Table for the Factors that Influence the Demand of Electric Cars ") ///
>        addnote("Note:  50 States in 2014 in the USA.")
(output written to table_correlation_electriccars.csv)

.            
.                    
. * Individual Regression Equations to Describe the functional forms with their signs
. * Drawing Scatter Plot for the functional form of the independent variable "ecarprices"
. 
. *regress ecarsales price_electricity
. *cprplot price_electricity, mspline msopts(bands(13))   
. 
. 
. gen ecarprices2 = ecarprices^2

. gen medianincome2 = medianincome^2

. gen price_electricity2 = price_electricity^2

. gen price_gasoline2 = price_gasoline^2

. gen numstations2 = numstations^2

. 
. * Dependent Variable: Average Electric Car Sales Across States
. * Estimated Model of the Regression:
. regress ecarsales ecarprices ecarprices2 price_electricity price_gasoline numstations medianincome, robust

Linear regression                               Number of obs     =         50
                                                F(6, 43)          =     168.22
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9109
                                                Root MSE          =     1490.2

-----------------------------------------------------------------------------------
                  |               Robust
        ecarsales |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------+----------------------------------------------------------------
       ecarprices |  -3.208083   1.421513    -2.26   0.029    -6.074837   -.3413294
      ecarprices2 |   .0000301   .0000138     2.18   0.035     2.26e-06     .000058
price_electricity |   4.425083   163.2859     0.03   0.979    -324.8724    333.7225
   price_gasoline |   490.2885   1313.248     0.37   0.711    -2158.128    3138.705
      numstations |   7.740414   .4966714    15.58   0.000      6.73878    8.742047
     medianincome |  -.0135017   .0182994    -0.74   0.465    -.0504061    .0234026
            _cons |   84990.49   36907.59     2.30   0.026     10559.24    159421.7
-----------------------------------------------------------------------------------

. 
. 
. * Several Regression Comparisons Across the Independent Variables
. eststo clear   /* clear any regressions that may be already stored in memory */

.   eststo:  quietly  regress ecarsales ecarprices ecarprices2 price_electricity price_gasoline numstations medianincome,
>  robust
(est1 stored)

.   eststo:  quietly  regress ecarsales price_electricity price_gasoline numstations medianincome, robust
(est2 stored)

.   eststo:  quietly  regress ecarsales ecarprices ecarprices2 price_gasoline numstations , robust
(est3 stored)

.   esttab  using table_sidebyside_regressions_CSV.csv, ///
>           r2 ar2 se scalar(F rmse) ///
>           star(* 0.10 ** 0.05 *** 0.01) ///
>           replace ///
>           label ///
>           depvars ///
>           varwidth(30) ///
>           title("Table 3.  Regression results for the Factors that Influence the Demand of Electric Cars") ///
>           nonotes ///
>           addnote("Note 1:  Robust standard errors are displayed in parenthesis." ///
>                   "Note 2:  [Number of Observations are 50]" ///
>                   "Significance levels:  * p<0.10; ** p<0.05; *** p<0.01" ///
>                   "Source:  []")
(output written to table_sidebyside_regressions_CSV.csv)

. 
.                                   
. *** The 3 regressions to check for omitted variable bias:
. regress ecarsales ecarprices ecarprices2 price_electricity price_gasoline numstations medianincome, robust

Linear regression                               Number of obs     =         50
                                                F(6, 43)          =     168.22
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9109
                                                Root MSE          =     1490.2

-----------------------------------------------------------------------------------
                  |               Robust
        ecarsales |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------+----------------------------------------------------------------
       ecarprices |  -3.208083   1.421513    -2.26   0.029    -6.074837   -.3413294
      ecarprices2 |   .0000301   .0000138     2.18   0.035     2.26e-06     .000058
price_electricity |   4.425083   163.2859     0.03   0.979    -324.8724    333.7225
   price_gasoline |   490.2885   1313.248     0.37   0.711    -2158.128    3138.705
      numstations |   7.740414   .4966714    15.58   0.000      6.73878    8.742047
     medianincome |  -.0135017   .0182994    -0.74   0.465    -.0504061    .0234026
            _cons |   84990.49   36907.59     2.30   0.026     10559.24    159421.7
-----------------------------------------------------------------------------------

. regress ecarsales price_electricity price_gasoline numstations medianincome, robust

Linear regression                               Number of obs     =         50
                                                F(4, 45)          =     375.02
                                                Prob > F          =     0.0000
                                                R-squared         =     0.8481
                                                Root MSE          =     1901.9

-----------------------------------------------------------------------------------
                  |               Robust
        ecarsales |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------+----------------------------------------------------------------
price_electricity |  -147.0083   132.1998    -1.11   0.272    -413.2724    119.2558
   price_gasoline |  -86.21481   1482.782    -0.06   0.954    -3072.692    2900.262
      numstations |   9.290243   .4168395    22.29   0.000     8.450685     10.1298
     medianincome |   .0235865   .0288457     0.82   0.418    -.0345117    .0816847
            _cons |  -7.292651   2798.759    -0.00   0.998    -5644.283    5629.697
-----------------------------------------------------------------------------------

. regress ecarsales ecarprices ecarprices2 price_gasoline numstations , robust

Linear regression                               Number of obs     =         50
                                                F(4, 45)          =     245.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.9104
                                                Root MSE          =     1461.2

--------------------------------------------------------------------------------
               |               Robust
     ecarsales |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
    ecarprices |  -3.214752   1.324611    -2.43   0.019    -5.882655   -.5468485
   ecarprices2 |   .0000302   .0000129     2.35   0.023     4.36e-06    .0000561
price_gasoline |   278.8037   1073.539     0.26   0.796    -1883.415    2441.022
   numstations |   7.772371   .4880806    15.92   0.000     6.789326    8.755416
         _cons |   84725.22    34369.2     2.47   0.018     15502.09    153948.4
--------------------------------------------------------------------------------

. 
. * Correlation between all of the variables                               
. correlate ecarsales ecarprices ecarprices2 price_electricity price_gasoline numstations medianincome
(obs=50)

             | ecarsa~s ecarpr~s ecarpr~2 price_~y price_~e numsta~s median~e
-------------+---------------------------------------------------------------
   ecarsales |   1.0000
  ecarprices |  -0.5909   1.0000
 ecarprices2 |  -0.5751   0.9989   1.0000
price_elec~y |   0.1089  -0.0961  -0.1030   1.0000
price_gaso~e |   0.3312  -0.1076  -0.1041   0.4025   1.0000
 numstations |   0.9199  -0.4335  -0.4220   0.1413   0.3646   1.0000
medianincome |   0.1323  -0.2426  -0.2439   0.5119   0.3556   0.1192   1.0000


.                                   
. *** Graphs 
. * Histogram For the All of the Variables
. 
. hist ecarsales, ///
>          title("Histogram:  2014 Electric Car Sales Across 50 States in the USA" ///
>            " ", span) ///
>                    
(bin=7, start=110, width=4194.4286)

. 
. *close the log
. 
. log close
      name:  <unnamed>
       log:  /Users/arhanuguray/Desktop/Northeastern University/Fall 2015/Econometrics/Research Project/STATA/researchpro
> ject.log
  log type:  text
 closed on:  24 Nov 2015, 14:56:53
-------------------------------------------------------------------------------------------------------------------------
